---
title: "[RUST] 러스트 프로그래밍 공식 가이드(제2판) 15장 요약"
description: 스마트 포인터
author: 김우석
date: 2025-10-13 19:00:00 +0900
categories: [Rust, OfficialGuide]
tags: [Rust]
image:
  path: /assets/img/posts/rust/rust-logo.svg
---

- 포인터 : 메모리의 주솟값을 담고 있는 변수에 대한 일반적인 개념
- 스마트 포인터 : 포인터처럼 작동할 뿐 아니라 추가적인 메타데이터와 능력을 가지고 있는 데이터 구조

## Box<T>를 사용하여 힙에 있는 데이터 가리키기
- 스마트 포인터 박스(box)는 `Box<T>` 로 쓰이는 타입이며 스택이 아니라 힙에 데이터를 저장할 수 있도록 해줌
- Box<T> 타입은 Deref 트레이트를 구현하고 있기 때문에 스마트 포인터이며, 이는 Box<T>값이 참조자와 같이 취급되도록 허용해줌
- Box<T>값이 스코프 밖으로 벗어날 때, 박스가 가리키고 있는 힙 데이터도 정리되는데 이는 Drop 트레이트의 구현 때문

### Box<T>를 사용하여 힙에 데이터 저장하기
- `Box<T>`는 **힙 메모리에 데이터를 저장**하고, 그 데이터를 가리키는 **포인터(Box) 자체는 스택(Stack) 에 저장**됨
    - `let b = Box::new(5);` 와 같이 사용할 수 있으며, 여기서 `5` 는 힙에 할당됨
- 박스는 스코프를 벗어날 때 할당이 해제되며 할당 해제는 **스택에 저장된 박스**와 이것이 가리키고 있는 **힙에 저장된 데이터** 모두에게 일어남

### 박스로 재귀적 타입 가능하게 하기
- 재귀적 타입의 값은 자신 안에 동일한 타입의 또 다른 값을 담을 수 있지만, 러스트는 컴파일 타임에 어떤 타입이 얼마만큼의 공간을 차지하는지 알아야 하기 때문에 재귀적 타입은 문제를 일으킴
- 박스는 알려진 크기를 갖고 있으므로, 재귀적 타입의 정의에 박스를 집어넣어 재귀적 타입을 가능하게 함

## Deref 트레이트로 스마트 포인터를 보통의 참조자처럼 취급하기